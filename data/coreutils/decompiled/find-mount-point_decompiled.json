{
    "file": "find-mount-point",
    "decompiled_code": {
        "find-mount-point.c": [
            {
                "func_name": "find_mount_point",
                "func_c_signature": "undefined8 find_mount_point(char *param_1,__dev_t *param_2)",
                "decompiled_code": "undefined8 find_mount_point(char *param_1,__dev_t *param_2) {\n  long lVar1;\n  char *pcVar2;\n  __dev_t **pp_Var3;\n  int iVar4;\n  undefined8 uVar5;\n  int *piVar6;\n  size_t sVar7;\n  ulong uVar8;\n  undefined8 uVar9;\n  __dev_t **pp_Var10;\n  undefined *puVar11;\n  __dev_t **pp_Var12;\n  long in_FS_OFFSET;\n  __dev_t *local_218;\n  char *local_210;\n  int local_1fc;\n  undefined4 local_1f8;\n  int local_1f4;\n  undefined4 local_1f0;\n  int local_1ec;\n  undefined4 local_1e8;\n  int local_1e4;\n  undefined4 local_1e0;\n  int local_1dc;\n  undefined4 local_1d8;\n  int local_1d4;\n  undefined4 local_1d0;\n  int local_1cc;\n  undefined4 local_1c8;\n  int local_1c4;\n  undefined8 local_1c0;\n  char *local_1b8;\n  char *local_1b0;\n  size_t local_1a8;\n  void *local_1a0;\n  char *local_198;\n  undefined8 local_190;\n  undefined8 local_188;\n  undefined8 local_180;\n  undefined8 local_178;\n  undefined8 local_170;\n  undefined8 local_168;\n  undefined8 local_160;\n  undefined local_158 [16];\n  stat local_148;\n  stat local_b8;\n  long local_20;\n  \n  pp_Var10 = &local_218;\n  pp_Var12 = &local_218;\n  local_20 = *(long *)(in_FS_OFFSET + 0x28);\n  local_1c0 = 0;\n  local_218 = param_2;\n  local_210 = param_1;\n  iVar4 = save_cwd(local_158);\n  if (iVar4 != 0) {\n    uVar5 = gettext(\"cannot get current directory\");\n    piVar6 = __errno_location();\n    local_1f4 = *piVar6;\n    local_1f8 = 0;\n    local_190 = uVar5;\n    error(0,local_1f4,uVar5);\n    uVar5 = 0;\n    pp_Var12 = &local_218;\n    goto LAB_001006f1;\n  }\n  if ((*(uint *)(local_218 + 3) & 0xf000) == 0x4000) {\n    local_148.st_dev = *local_218;\n    local_148.st_ino = local_218[1];\n    local_148.st_nlink = local_218[2];\n    local_148._24_8_ = local_218[3];\n    local_148._32_8_ = local_218[4];\n    local_148.st_rdev = local_218[5];\n    local_148.st_size = local_218[6];\n    local_148.st_blksize = local_218[7];\n    local_148.st_blocks = local_218[8];\n    local_148.st_atim.tv_sec = local_218[9];\n    local_148.st_atim.tv_nsec = local_218[10];\n    local_148.st_mtim.tv_sec = local_218[0xb];\n    local_148.st_mtim.tv_nsec = local_218[0xc];\n    local_148.st_ctim.tv_sec = local_218[0xd];\n    local_148.st_ctim.tv_nsec = local_218[0xe];\n    local_148.__unused[0] = local_218[0xf];\n    local_148.__unused[2] = local_218[0x11];\n    local_148.__unused[1] = local_218[0x10];\n    iVar4 = chdir(local_210);\n    pp_Var3 = &local_218;\n    if (iVar4 < 0) {\n      uVar5 = quotearg_style(4,local_210);\n      uVar9 = gettext(\"cannot change to directory %s\");\n      piVar6 = __errno_location();\n      local_1ec = *piVar6;\n      local_1f0 = 0;\n      local_188 = uVar9;\n      error(0,local_1ec,uVar9,uVar5);\n      uVar5 = 0;\n      goto LAB_001006f1;\n    }\nLAB_00100437:\n    while( true ) {\n      puVar11 = (undefined *)pp_Var3;\n      *(undefined8 *)(puVar11 + -8) = 0x100450;\n      iVar4 = stat(\"..\",&local_b8);\n      if (iVar4 < 0) break;\n      if ((local_b8.st_dev != local_148.st_dev) || (local_b8.st_ino == local_148.st_ino)) {\n        *(undefined8 *)(puVar11 + -8) = 0x100655;\n        local_1c0 = xgetcwd();\n        goto LAB_0010065c;\n      }\n      *(undefined8 *)(puVar11 + -8) = 0x100500;\n      iVar4 = chdir(\"..\");\n      if (iVar4 < 0) {\n        *(undefined8 *)(puVar11 + -8) = 0x100518;\n        uVar5 = quotearg_style(4,&DAT_00100777);\n        *(undefined8 *)(puVar11 + -8) = 0x10052a;\n        uVar9 = gettext(\"cannot change to directory %s\");\n        *(undefined8 *)(puVar11 + -8) = 0x100532;\n        piVar6 = __errno_location();\n        iVar4 = *piVar6;\n        local_1d0 = 0;\n        local_1cc = iVar4;\n        local_168 = uVar9;\n        *(undefined8 *)(puVar11 + -8) = 0x10056d;\n        error(0,iVar4,uVar9,uVar5);\n        goto LAB_0010065c;\n      }\n      local_148.st_dev = local_b8.st_dev;\n      local_148.st_ino = local_b8.st_ino;\n      local_148.st_nlink = local_b8.st_nlink;\n      local_148._24_8_ = local_b8._24_8_;\n      local_148._32_8_ = local_b8._32_8_;\n      local_148.st_rdev = local_b8.st_rdev;\n      local_148.st_size = local_b8.st_size;\n      local_148.st_blksize = local_b8.st_blksize;\n      local_148.st_blocks = local_b8.st_blocks;\n      local_148.st_atim.tv_sec = local_b8.st_atim.tv_sec;\n      local_148.st_atim.tv_nsec = local_b8.st_atim.tv_nsec;\n      local_148.st_mtim.tv_sec = local_b8.st_mtim.tv_sec;\n      local_148.st_mtim.tv_nsec = local_b8.st_mtim.tv_nsec;\n      local_148.st_ctim.tv_sec = local_b8.st_ctim.tv_sec;\n      local_148.st_ctim.tv_nsec = local_b8.st_ctim.tv_nsec;\n      local_148.__unused[0] = local_b8.__unused[0];\n      local_148.__unused[1] = local_b8.__unused[1];\n      local_148.__unused[2] = local_b8.__unused[2];\n      pp_Var3 = (__dev_t **)puVar11;\n    }\n    *(undefined8 *)(puVar11 + -8) = 0x100468;\n    uVar5 = quotearg_style(4,&DAT_00100777);\n    *(undefined8 *)(puVar11 + -8) = 0x10047a;\n    uVar9 = gettext(\"cannot stat %s\");\n    *(undefined8 *)(puVar11 + -8) = 0x100482;\n    piVar6 = __errno_location();\n    iVar4 = *piVar6;\n    local_1d8 = 0;\n    local_1d4 = iVar4;\n    local_170 = uVar9;\n    *(undefined8 *)(puVar11 + -8) = 0x1004bd;\n    error(0,iVar4,uVar9,uVar5);\n  }\n  else {\n    local_1b8 = (char *)dir_name(local_210);\n    local_1b0 = local_1b8;\n    sVar7 = strlen(local_1b8);\n    local_1a8 = sVar7 + 1;\n    uVar8 = ((sVar7 + 0x18) / 0x10) * 0x10;\n    for (; pp_Var10 != (__dev_t **)((long)&local_218 - (uVar8 & 0xfffffffffffff000));\n        pp_Var10 = (__dev_t **)((long)pp_Var10 + -0x1000)) {\n      *(undefined8 *)((long)pp_Var10 + -8) = *(undefined8 *)((long)pp_Var10 + -8);\n    }\n    lVar1 = -(ulong)((uint)uVar8 & 0xfff);\n    puVar11 = (undefined *)((long)pp_Var10 + lVar1);\n    pp_Var12 = (__dev_t **)((long)pp_Var10 + lVar1);\n    if ((uVar8 & 0xfff) != 0) {\n      *(undefined8 *)((long)pp_Var10 + ((ulong)((uint)uVar8 & 0xfff) - 8) + lVar1) =\n           *(undefined8 *)((long)pp_Var10 + ((ulong)((uint)uVar8 & 0xfff) - 8) + lVar1);\n    }\n    sVar7 = local_1a8;\n    pcVar2 = local_1b0;\n    local_1a0 = (void *)((ulong)((long)pp_Var10 + lVar1 + 0xf) & 0xfffffffffffffff0);\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x10030e;\n    local_198 = (char *)memcpy((void *)((ulong)((long)pp_Var10 + lVar1 + 0xf) & 0xfffffffffffffff0),\n                               pcVar2,sVar7);\n    pcVar2 = local_1b8;\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x100324;\n    free(pcVar2);\n    pcVar2 = local_198;\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x100333;\n    iVar4 = chdir(pcVar2);\n    pcVar2 = local_198;\n    if (iVar4 < 0) {\n      *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x10034b;\n      uVar5 = quotearg_style(4,pcVar2);\n      *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x10035d;\n      uVar9 = gettext(\"cannot change to directory %s\");\n      *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x100365;\n      piVar6 = __errno_location();\n      iVar4 = *piVar6;\n      local_1e8 = 0;\n      local_1e4 = iVar4;\n      local_180 = uVar9;\n      *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x1003a0;\n      error(0,iVar4,uVar9,uVar5);\n      uVar5 = 0;\n      goto LAB_001006f1;\n    }\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x1003c4;\n    iVar4 = stat(\".\",&local_148);\n    pcVar2 = local_198;\n    pp_Var3 = (__dev_t **)((long)pp_Var10 + lVar1);\n    if (-1 < iVar4) goto LAB_00100437;\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x1003dc;\n    uVar5 = quotearg_style(4,pcVar2);\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x1003ee;\n    uVar9 = gettext(\"cannot stat current directory (now %s)\");\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x1003f6;\n    piVar6 = __errno_location();\n    iVar4 = *piVar6;\n    local_1e0 = 0;\n    local_1dc = iVar4;\n    local_178 = uVar9;\n    *(undefined8 *)((long)pp_Var10 + lVar1 + -8) = 0x100431;\n    error(0,iVar4,uVar9,uVar5);\n  }\nLAB_0010065c:\n  *(undefined8 *)(puVar11 + -8) = 0x100661;\n  piVar6 = __errno_location();\n  local_1fc = *piVar6;\n  *(undefined8 *)(puVar11 + -8) = 0x100678;\n  iVar4 = restore_cwd(local_158);\n  if (iVar4 != 0) {\n    *(undefined8 *)(puVar11 + -8) = 0x10068b;\n    uVar5 = gettext(\"failed to return to initial working directory\");\n    *(undefined8 *)(puVar11 + -8) = 0x100693;\n    piVar6 = __errno_location();\n    iVar4 = *piVar6;\n    local_1c8 = 1;\n    local_1c4 = iVar4;\n    local_160 = uVar5;\n    *(undefined8 *)(puVar11 + -8) = 0x1006cd;\n    error(1,iVar4,uVar5);\n  }\n  *(undefined8 *)(puVar11 + -8) = 0x1006dd;\n  free_cwd(local_158);\n  *(undefined8 *)(puVar11 + -8) = 0x1006e2;\n  piVar6 = __errno_location();\n  *piVar6 = local_1fc;\n  uVar5 = local_1c0;\n  pp_Var12 = (__dev_t **)puVar11;\nLAB_001006f1:\n  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {\n    return uVar5;\n  }\n                    /* WARNING: Subroutine does not return */\n  *(undefined8 *)((long)pp_Var12 + -8) = 0x100705;\n  __stack_chk_fail();\n}",
                "globals": [],
                "externs": [
                    "directory"
                ],
                "types": [],
                "includes": [],
                "dependencies": {
                    "called_functions": [
                        "find_mount_point",
                        "save_cwd",
                        "gettext",
                        "__errno_location",
                        "error",
                        "chdir",
                        "quotearg_style",
                        "stat",
                        "xgetcwd",
                        "dir_name",
                        "strlen",
                        "memcpy",
                        "free",
                        "directory",
                        "restore_cwd",
                        "free_cwd",
                        "__stack_chk_fail"
                    ],
                    "calling_functions": [
                        "find_mount_point"
                    ],
                    "defined_in_file": "find-mount-point_decompiled.c"
                }
            }
        ]
    }
}