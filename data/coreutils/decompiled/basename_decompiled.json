{
    "file": "basename",
    "decompiled_code": {
        "basename.c": [
            {
                "func_name": "usage",
                "func_c_signature": "void usage(int param_1)",
                "decompiled_code": "void usage(int param_1) {\n  FILE *pFVar1;\n  undefined8 uVar2;\n  char *pcVar3;\n  \n  uVar2 = _program_name;\n  if (param_1 == 0) {\n    pcVar3 = (char *)gettext(\"Usage: %s NAME [SUFFIX]\\n  or:  %s OPTION... NAME...\\n\");\n    printf(pcVar3,uVar2,uVar2);\n    pFVar1 = _stdout;\n    pcVar3 = (char *)gettext(\n                            \"Print NAME with any leading directory components removed.\\nIf specified, also remove a trailing SUFFIX.\\n\"\n                            );\n    fputs_unlocked(pcVar3,pFVar1);\n    emit_mandatory_arg_note();\n    pFVar1 = _stdout;\n    pcVar3 = (char *)gettext(\n                            \"  -a, --multiple       support multiple arguments and treat each as a NAME\\n  -s, --suffix=SUFFIX  remove a trailing SUFFIX; implies -a\\n  -z, --zero           end each output line with NUL, not newline\\n\"\n                            );\n    fputs_unlocked(pcVar3,pFVar1);\n    pFVar1 = _stdout;\n    pcVar3 = (char *)gettext(\"      --help        display this help and exit\\n\");\n    fputs_unlocked(pcVar3,pFVar1);\n    pFVar1 = _stdout;\n    pcVar3 = (char *)gettext(\"      --version     output version information and exit\\n\");\n    fputs_unlocked(pcVar3,pFVar1);\n    uVar2 = _program_name;\n    pcVar3 = (char *)gettext(\n                            \"\\nExamples:\\n  %s /usr/bin/sort          -> \\\"sort\\\"\\n  %s include/stdio.h .h     -> \\\"stdio\\\"\\n  %s -s .h include/stdio.h  -> \\\"stdio\\\"\\n  %s -a any/str1 any/str2   -> \\\"str1\\\" followed by \\\"str2\\\"\\n\"\n                            );\n    printf(pcVar3,uVar2,uVar2,uVar2,uVar2);\n    emit_ancillary_info(\"basename\");\n  }\n  else {\n    pcVar3 = (char *)gettext(\"Try \\'%s --help\\' for more information.\\n\");\n    fprintf(_stderr,pcVar3,uVar2);\n  }\n                    /* WARNING: Subroutine does not return */\n  exit(param_1);\n}",
                "globals": [],
                "externs": [],
                "types": [],
                "includes": [],
                "dependencies": {
                    "called_functions": [
                        "usage",
                        "gettext",
                        "printf",
                        "fputs_unlocked",
                        "emit_mandatory_arg_note",
                        "emit_ancillary_info",
                        "fprintf",
                        "exit"
                    ],
                    "calling_functions": [
                        "usage",
                        "main"
                    ],
                    "defined_in_file": "basename_decompiled.c"
                }
            },
            {
                "func_name": "remove_suffix",
                "func_c_signature": "void remove_suffix(char *param_1,char *param_2)",
                "decompiled_code": "void remove_suffix(char *param_1,char *param_2) {\n  size_t sVar1;\n  char *local_18;\n  char *local_10;\n  \n  sVar1 = strlen(param_1);\n  local_18 = param_1 + sVar1;\n  sVar1 = strlen(param_2);\n  local_10 = param_2 + sVar1;\n  while ((param_1 < local_18 && (param_2 < local_10))) {\n    local_18 = local_18 + -1;\n    local_10 = local_10 + -1;\n    if (*local_18 != *local_10) {\n      return;\n    }\n  }\n  if (local_18 <= param_1) {\n    return;\n  }\n  *local_18 = '\\0';\n  return;\n}",
                "globals": [],
                "externs": [],
                "types": [],
                "includes": [],
                "dependencies": {
                    "called_functions": [
                        "remove_suffix",
                        "strlen"
                    ],
                    "calling_functions": [
                        "remove_suffix",
                        "perform_basename"
                    ],
                    "defined_in_file": "basename_decompiled.c"
                }
            },
            {
                "func_name": "perform_basename",
                "func_c_signature": "void perform_basename(undefined8 param_1,long param_2,char param_3)",
                "decompiled_code": "void perform_basename(undefined8 param_1,long param_2,char param_3) {\n  int __c;\n  char *__s;\n  \n  __s = (char *)base_name(param_1);\n  strip_trailing_slashes(__s);\n  if ((param_2 != 0) && (*__s != '/')) {\n    remove_suffix(__s,param_2);\n  }\n  fputs_unlocked(__s,_stdout);\n  if (param_3 == '\\0') {\n    __c = 10;\n  }\n  else {\n    __c = 0;\n  }\n  putchar_unlocked(__c);\n  free(__s);\n  return;\n}",
                "globals": [],
                "externs": [],
                "types": [],
                "includes": [],
                "dependencies": {
                    "called_functions": [
                        "perform_basename",
                        "base_name",
                        "strip_trailing_slashes",
                        "remove_suffix",
                        "fputs_unlocked",
                        "putchar_unlocked",
                        "free"
                    ],
                    "calling_functions": [
                        "perform_basename",
                        "main"
                    ],
                    "defined_in_file": "basename_decompiled.c"
                }
            },
            {
                "func_name": "main",
                "func_c_signature": "undefined8 main(int param_1,undefined8 *param_2)",
                "decompiled_code": "undefined8 main(int param_1,undefined8 *param_2) {\n  bool bVar1;\n  int iVar2;\n  undefined8 uVar3;\n  undefined8 uVar4;\n  undefined local_45;\n  undefined8 local_30;\n  \n  bVar1 = false;\n  local_45 = 0;\n  local_30 = 0;\n  set_program_name(*param_2);\n  setlocale(6,\"\");\n  bindtextdomain(\"coreutils\",\"/usr/local/share/locale\");\n  textdomain(\"coreutils\");\n  atexit((__func *)&close_stdout);\n  do {\n    while( true ) {\n      while( true ) {\n        iVar2 = getopt_long(param_1,param_2,\"+as:z\",longopts,0);\n        if (iVar2 == -1) {\n          if (param_1 <= _optind) {\n            uVar3 = gettext(\"missing operand\");\n            error(0,0,uVar3);\n            usage(1);\n          }\n          if ((!bVar1) && (_optind + 2 < param_1)) {\n            uVar3 = quote(param_2[(long)_optind + 2]);\n            uVar4 = gettext(\"extra operand %s\");\n            error(0,0,uVar4,uVar3);\n            usage(1);\n          }\n          if (bVar1) {\n            for (; _optind < param_1; _optind = _optind + 1) {\n              perform_basename(param_2[_optind],local_30,local_45);\n            }\n          }\n          else {\n            if (param_1 == _optind + 2) {\n              uVar3 = param_2[(long)_optind + 1];\n            }\n            else {\n              uVar3 = 0;\n            }\n            perform_basename(param_2[_optind],uVar3,local_45);\n          }\n          return 0;\n        }\n        if (iVar2 != 0x7a) break;\n        local_45 = 1;\n      }\n      if (iVar2 < 0x7b) break;\nLAB_00100699:\n      usage(1);\n    }\n    if (iVar2 != 0x73) {\n      if (iVar2 < 0x74) {\n        if (iVar2 == 0x61) goto LAB_00100628;\n        if (iVar2 < 0x62) {\n          if (iVar2 == -0x83) {\nLAB_0010063e:\n            uVar3 = proper_name_lite(\"David MacKenzie\",\"David MacKenzie\");\n            version_etc(_stdout,\"basename\",\"GNU coreutils\",_Version,uVar3,0);\n                    /* WARNING: Subroutine does not return */\n            exit(0);\n          }\n          if (iVar2 == -0x82) {\n            usage(0);\n            goto LAB_0010063e;\n          }\n        }\n      }\n      goto LAB_00100699;\n    }\n    local_30 = _optarg;\nLAB_00100628:\n    bVar1 = true;\n  } while( true );\n}",
                "globals": [],
                "externs": [],
                "types": [],
                "includes": [],
                "dependencies": {
                    "called_functions": [
                        "main",
                        "set_program_name",
                        "setlocale",
                        "bindtextdomain",
                        "textdomain",
                        "atexit",
                        "getopt_long",
                        "gettext",
                        "error",
                        "usage",
                        "quote",
                        "perform_basename",
                        "proper_name_lite",
                        "version_etc",
                        "exit"
                    ],
                    "calling_functions": [
                        "main"
                    ],
                    "defined_in_file": "basename_decompiled.c"
                }
            }
        ]
    }
}